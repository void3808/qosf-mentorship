"""
			========= circuit[ 0 ][ 0 ]=========

                  ┌───┐     ┌───┐ ░                      ░                ┌─┐»
    code_qubit_0: ┤ H ├──■──┤ I ├─░───■──────────────────░────────■───────┤M├»
                  └───┘┌─┴─┐├───┤ ░   │           ┌───┐  ░        │       └╥┘»
    code_qubit_1: ─────┤ X ├┤ I ├─░───┼────■──────┤ X ├──░────────┼────■───╫─»
                       └───┘└───┘ ░ ┌─┴─┐┌─┴─┐┌─┐ └─┬─┘  ░      ┌─┴─┐┌─┴─┐ ║ »
    link_qubit_0: ────────────────░─┤ X ├┤ X ├┤M├───┼────░──|0>─┤ X ├┤ X ├─╫─»
                                  ░ └───┘└───┘└╥┘   │    ░      └───┘└───┘ ║ »
      code_bit: 2/═════════════════════════════╬════╪══════════════════════╩═»
                                               ║ ┌──┴──┐                   0 »
round_link_bit: 2/═════════════════════════════╩═╡ = 1 ╞═════════════════════»
                                               0 └─────┘                     »
«                        
«    code_qubit_0: ──────
«                     ┌─┐
«    code_qubit_1: ───┤M├
«                  ┌─┐└╥┘
«    link_qubit_0: ┤M├─╫─
«                  └╥┘ ║ 
«      code_bit: 2/═╬══╩═
«                   ║  1 
«round_link_bit: 2/═╩════
«                   1    
{'00 00': 492, '00 11': 532}

			========= circuit[ 0 ][ 1 ]=========

                  ┌───┐     ┌───┐ ░                      ░                ┌─┐»
    code_qubit_0: ┤ H ├──■──┤ I ├─░───■──────────────────░────────■───────┤M├»
                  └───┘┌─┴─┐├───┤ ░   │           ┌───┐  ░        │       └╥┘»
    code_qubit_1: ─────┤ X ├┤ X ├─░───┼────■──────┤ X ├──░────────┼────■───╫─»
                       └───┘└───┘ ░ ┌─┴─┐┌─┴─┐┌─┐ └─┬─┘  ░      ┌─┴─┐┌─┴─┐ ║ »
    link_qubit_0: ────────────────░─┤ X ├┤ X ├┤M├───┼────░──|0>─┤ X ├┤ X ├─╫─»
                                  ░ └───┘└───┘└╥┘   │    ░      └───┘└───┘ ║ »
      code_bit: 2/═════════════════════════════╬════╪══════════════════════╩═»
                                               ║ ┌──┴──┐                   0 »
round_link_bit: 2/═════════════════════════════╩═╡ = 1 ╞═════════════════════»
                                               0 └─────┘                     »
«                        
«    code_qubit_0: ──────
«                     ┌─┐
«    code_qubit_1: ───┤M├
«                  ┌─┐└╥┘
«    link_qubit_0: ┤M├─╫─
«                  └╥┘ ║ 
«      code_bit: 2/═╬══╩═
«                   ║  1 
«round_link_bit: 2/═╩════
«                   1    
{'01 00': 504, '01 11': 520}

			========= circuit[ 0 ][ 2 ]=========

                  ┌───┐     ┌───┐ ░                      ░                ┌─┐»
    code_qubit_0: ┤ H ├──■──┤ I ├─░───■──────────────────░────────■───────┤M├»
                  └───┘┌─┴─┐├───┤ ░   │           ┌───┐  ░        │       └╥┘»
    code_qubit_1: ─────┤ X ├┤ Z ├─░───┼────■──────┤ X ├──░────────┼────■───╫─»
                       └───┘└───┘ ░ ┌─┴─┐┌─┴─┐┌─┐ └─┬─┘  ░      ┌─┴─┐┌─┴─┐ ║ »
    link_qubit_0: ────────────────░─┤ X ├┤ X ├┤M├───┼────░──|0>─┤ X ├┤ X ├─╫─»
                                  ░ └───┘└───┘└╥┘   │    ░      └───┘└───┘ ║ »
      code_bit: 2/═════════════════════════════╬════╪══════════════════════╩═»
                                               ║ ┌──┴──┐                   0 »
round_link_bit: 2/═════════════════════════════╩═╡ = 1 ╞═════════════════════»
                                               0 └─────┘                     »
«                        
«    code_qubit_0: ──────
«                     ┌─┐
«    code_qubit_1: ───┤M├
«                  ┌─┐└╥┘
«    link_qubit_0: ┤M├─╫─
«                  └╥┘ ║ 
«      code_bit: 2/═╬══╩═
«                   ║  1 
«round_link_bit: 2/═╩════
«                   1    
{'00 00': 538, '00 11': 486}

			========= circuit[ 1 ][ 0 ]=========

                  ┌───┐     ┌───┐ ░                      ░                ┌─┐»
    code_qubit_0: ┤ H ├──■──┤ X ├─░───■──────────────────░────────■───────┤M├»
                  └───┘┌─┴─┐├───┤ ░   │           ┌───┐  ░        │       └╥┘»
    code_qubit_1: ─────┤ X ├┤ I ├─░───┼────■──────┤ X ├──░────────┼────■───╫─»
                       └───┘└───┘ ░ ┌─┴─┐┌─┴─┐┌─┐ └─┬─┘  ░      ┌─┴─┐┌─┴─┐ ║ »
    link_qubit_0: ────────────────░─┤ X ├┤ X ├┤M├───┼────░──|0>─┤ X ├┤ X ├─╫─»
                                  ░ └───┘└───┘└╥┘   │    ░      └───┘└───┘ ║ »
      code_bit: 2/═════════════════════════════╬════╪══════════════════════╩═»
                                               ║ ┌──┴──┐                   0 »
round_link_bit: 2/═════════════════════════════╩═╡ = 1 ╞═════════════════════»
                                               0 └─────┘                     »
«                        
«    code_qubit_0: ──────
«                     ┌─┐
«    code_qubit_1: ───┤M├
«                  ┌─┐└╥┘
«    link_qubit_0: ┤M├─╫─
«                  └╥┘ ║ 
«      code_bit: 2/═╬══╩═
«                   ║  1 
«round_link_bit: 2/═╩════
«                   1    
{'01 00': 490, '01 11': 534}

			========= circuit[ 1 ][ 1 ]=========

                  ┌───┐     ┌───┐ ░                      ░                ┌─┐»
    code_qubit_0: ┤ H ├──■──┤ X ├─░───■──────────────────░────────■───────┤M├»
                  └───┘┌─┴─┐├───┤ ░   │           ┌───┐  ░        │       └╥┘»
    code_qubit_1: ─────┤ X ├┤ X ├─░───┼────■──────┤ X ├──░────────┼────■───╫─»
                       └───┘└───┘ ░ ┌─┴─┐┌─┴─┐┌─┐ └─┬─┘  ░      ┌─┴─┐┌─┴─┐ ║ »
    link_qubit_0: ────────────────░─┤ X ├┤ X ├┤M├───┼────░──|0>─┤ X ├┤ X ├─╫─»
                                  ░ └───┘└───┘└╥┘   │    ░      └───┘└───┘ ║ »
      code_bit: 2/═════════════════════════════╬════╪══════════════════════╩═»
                                               ║ ┌──┴──┐                   0 »
round_link_bit: 2/═════════════════════════════╩═╡ = 1 ╞═════════════════════»
                                               0 └─────┘                     »
«                        
«    code_qubit_0: ──────
«                     ┌─┐
«    code_qubit_1: ───┤M├
«                  ┌─┐└╥┘
«    link_qubit_0: ┤M├─╫─
«                  └╥┘ ║ 
«      code_bit: 2/═╬══╩═
«                   ║  1 
«round_link_bit: 2/═╩════
«                   1    
{'00 00': 497, '00 11': 527}

			========= circuit[ 1 ][ 2 ]=========

                  ┌───┐     ┌───┐ ░                      ░                ┌─┐»
    code_qubit_0: ┤ H ├──■──┤ X ├─░───■──────────────────░────────■───────┤M├»
                  └───┘┌─┴─┐├───┤ ░   │           ┌───┐  ░        │       └╥┘»
    code_qubit_1: ─────┤ X ├┤ Z ├─░───┼────■──────┤ X ├──░────────┼────■───╫─»
                       └───┘└───┘ ░ ┌─┴─┐┌─┴─┐┌─┐ └─┬─┘  ░      ┌─┴─┐┌─┴─┐ ║ »
    link_qubit_0: ────────────────░─┤ X ├┤ X ├┤M├───┼────░──|0>─┤ X ├┤ X ├─╫─»
                                  ░ └───┘└───┘└╥┘   │    ░      └───┘└───┘ ║ »
      code_bit: 2/═════════════════════════════╬════╪══════════════════════╩═»
                                               ║ ┌──┴──┐                   0 »
round_link_bit: 2/═════════════════════════════╩═╡ = 1 ╞═════════════════════»
                                               0 └─────┘                     »
«                        
«    code_qubit_0: ──────
«                     ┌─┐
«    code_qubit_1: ───┤M├
«                  ┌─┐└╥┘
«    link_qubit_0: ┤M├─╫─
«                  └╥┘ ║ 
«      code_bit: 2/═╬══╩═
«                   ║  1 
«round_link_bit: 2/═╩════
«                   1    
{'01 00': 512, '01 11': 512}

			========= circuit[ 2 ][ 0 ]=========

                  ┌───┐     ┌───┐ ░                      ░                ┌─┐»
    code_qubit_0: ┤ H ├──■──┤ Z ├─░───■──────────────────░────────■───────┤M├»
                  └───┘┌─┴─┐├───┤ ░   │           ┌───┐  ░        │       └╥┘»
    code_qubit_1: ─────┤ X ├┤ I ├─░───┼────■──────┤ X ├──░────────┼────■───╫─»
                       └───┘└───┘ ░ ┌─┴─┐┌─┴─┐┌─┐ └─┬─┘  ░      ┌─┴─┐┌─┴─┐ ║ »
    link_qubit_0: ────────────────░─┤ X ├┤ X ├┤M├───┼────░──|0>─┤ X ├┤ X ├─╫─»
                                  ░ └───┘└───┘└╥┘   │    ░      └───┘└───┘ ║ »
      code_bit: 2/═════════════════════════════╬════╪══════════════════════╩═»
                                               ║ ┌──┴──┐                   0 »
round_link_bit: 2/═════════════════════════════╩═╡ = 1 ╞═════════════════════»
                                               0 └─────┘                     »
«                        
«    code_qubit_0: ──────
«                     ┌─┐
«    code_qubit_1: ───┤M├
«                  ┌─┐└╥┘
«    link_qubit_0: ┤M├─╫─
«                  └╥┘ ║ 
«      code_bit: 2/═╬══╩═
«                   ║  1 
«round_link_bit: 2/═╩════
«                   1    
{'00 00': 496, '00 11': 528}

			========= circuit[ 2 ][ 1 ]=========

                  ┌───┐     ┌───┐ ░                      ░                ┌─┐»
    code_qubit_0: ┤ H ├──■──┤ Z ├─░───■──────────────────░────────■───────┤M├»
                  └───┘┌─┴─┐├───┤ ░   │           ┌───┐  ░        │       └╥┘»
    code_qubit_1: ─────┤ X ├┤ X ├─░───┼────■──────┤ X ├──░────────┼────■───╫─»
                       └───┘└───┘ ░ ┌─┴─┐┌─┴─┐┌─┐ └─┬─┘  ░      ┌─┴─┐┌─┴─┐ ║ »
    link_qubit_0: ────────────────░─┤ X ├┤ X ├┤M├───┼────░──|0>─┤ X ├┤ X ├─╫─»
                                  ░ └───┘└───┘└╥┘   │    ░      └───┘└───┘ ║ »
      code_bit: 2/═════════════════════════════╬════╪══════════════════════╩═»
                                               ║ ┌──┴──┐                   0 »
round_link_bit: 2/═════════════════════════════╩═╡ = 1 ╞═════════════════════»
                                               0 └─────┘                     »
«                        
«    code_qubit_0: ──────
«                     ┌─┐
«    code_qubit_1: ───┤M├
«                  ┌─┐└╥┘
«    link_qubit_0: ┤M├─╫─
«                  └╥┘ ║ 
«      code_bit: 2/═╬══╩═
«                   ║  1 
«round_link_bit: 2/═╩════
«                   1    
{'01 00': 515, '01 11': 509}

			========= circuit[ 2 ][ 2 ]=========

                  ┌───┐     ┌───┐ ░                      ░                ┌─┐»
    code_qubit_0: ┤ H ├──■──┤ Z ├─░───■──────────────────░────────■───────┤M├»
                  └───┘┌─┴─┐├───┤ ░   │           ┌───┐  ░        │       └╥┘»
    code_qubit_1: ─────┤ X ├┤ Z ├─░───┼────■──────┤ X ├──░────────┼────■───╫─»
                       └───┘└───┘ ░ ┌─┴─┐┌─┴─┐┌─┐ └─┬─┘  ░      ┌─┴─┐┌─┴─┐ ║ »
    link_qubit_0: ────────────────░─┤ X ├┤ X ├┤M├───┼────░──|0>─┤ X ├┤ X ├─╫─»
                                  ░ └───┘└───┘└╥┘   │    ░      └───┘└───┘ ║ »
      code_bit: 2/═════════════════════════════╬════╪══════════════════════╩═»
                                               ║ ┌──┴──┐                   0 »
round_link_bit: 2/═════════════════════════════╩═╡ = 1 ╞═════════════════════»
                                               0 └─────┘                     »
«                        
«    code_qubit_0: ──────
«                     ┌─┐
«    code_qubit_1: ───┤M├
«                  ┌─┐└╥┘
«    link_qubit_0: ┤M├─╫─
«                  └╥┘ ║ 
«      code_bit: 2/═╬══╩═
«                   ║  1 
«round_link_bit: 2/═╩════
«                   1    
{'00 00': 515, '00 11': 509}"""

import qiskit
from qiskit import *
def switch(circuit, i, qubit, reg):
    if i==0:
        circuit.i(reg[qubit])
    elif i==1:
        circuit.x(reg[qubit])
    elif i==2:
        circuit.z(reg[qubit])
    
cq=QuantumRegister(2,'code_qubit')
lq=QuantumRegister(1,'link_qubit')
cb=ClassicalRegister(2,'code_bit')
rlb=ClassicalRegister(2,'round_link_bit')
#qc={}
#print(list(range(3)))
for i in list(range(3)): #
    for j in list(range(3)):
 #       print(i,j)
        qc=QuantumCircuit(cq,lq,cb,rlb)
        qc.h(cq[0])
        qc.cx(cq[0],cq[1])
        switch(qc, i, 0, cq)
        switch(qc, j, 1, cq)
        qc.barrier()
        qc.cx([cq[0],cq[1]],[lq[0],lq[0]])
        qc.measure(lq[0],rlb[0])
        qc.x(cq[1]).c_if(rlb,1)
        qc.barrier()
        qc.reset(lq[0])
        qc.cx([cq[0],cq[1]],[lq[0],lq[0]])
        qc.measure(lq[0],rlb[1])
        qc.measure(cq,cb)
        print('\n\t\t\t========= circuit[',i,'][',j,']=========\n')
        print(qc)
        job = execute( qc, Aer.get_backend('qasm_simulator') )
        print(job.result().get_counts(qc))
